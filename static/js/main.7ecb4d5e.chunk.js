(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{105:function(e,t,n){e.exports={sendForm:"SendForm_sendForm__15Va5"}},115:function(e,t,n){e.exports={resultingDistance:"ResultingDistance_resultingDistance__3eXpO"}},116:function(e,t,n){e.exports={loadingProcess:"LoadingProcess_loadingProcess__2lJVp"}},148:function(e,t,n){},149:function(e,t,n){},175:function(e,t,n){"use strict";n.r(t);var a=n(7),i=n(0),c=n.n(i),s=n(12),o=n.n(s),r=(n(148),n(8)),d=(n(149),n(81)),u=n.n(d),l=n(43),j=n.p+"static/media/pointer.8c1cae95.svg",b=c.a.memo((function(e){var t=e.getMapCoordinates,n=e.pointList,i=e.center,c=e.zoom;return Object(a.jsx)("div",{className:u.a.yandexMap,children:Object(a.jsx)(l.e,{children:Object(a.jsx)("div",{children:Object(a.jsxs)(l.a,{className:u.a.Map,onDblClick:function(e){t(e)},state:{center:i,zoom:c},children:[Object(a.jsx)(l.f,{options:{position:{right:10,top:10}}}),Object(a.jsx)(l.d,{options:{position:{left:10,top:10}}}),Object(a.jsx)(l.c,{options:{position:{right:50,top:10}}}),n.map((function(e){return Object(a.jsx)(l.b,{geometry:[+e.latitude,+e.longitude],modules:["geoObject.addon.balloon","geoObject.addon.hint"],properties:{hintContent:e.address,balloonContent:e.lastPointDistance},options:{iconLayout:"default#image",iconImageHref:j,iconImageSize:[100,100],iconImageOffset:[0,-100]}})}))]})})})})})),p=n(105),g=n.n(p),f=n(118),m=n(28),O=n(54),h=n(127),x=n(49),v=n.n(x),P=n(69),y=n(19),D=n(32),w=n(83),C=n.n(w),L=C.a.create({baseURL:"https://geocode-maps.yandex.ru/1.x/"}),_=function(e,t){return L.get("?geocode=".concat(t,",").concat(e))};L.interceptors.request.use(function(){var e=Object(P.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.params=Object(D.a)(Object(D.a)({},t.params),{},{apikey:"62863b39-ff46-4e0f-a09b-34ed4079f28a",format:"json"}),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)}));var S=C.a.create({baseURL:"https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/distancematrix/"}),N=function(e,t,n){return S.get("json?origins=".concat(e,",").concat(t,"&destinations=").concat(n[0],",").concat(n[1],"&key=AIzaSyDZYmugNtrfSskRFo0Wa3QYPRva1AeiuwU"))},M={pointList:[]},k=function(e){return{type:"MAP-REDUCER/ADD_OBJECT",newObject:e}},F=n(227),T=n(225),E=n(64),R=function(e){return Object(a.jsx)(T.a,Object(D.a)({elevation:6,variant:"filled"},e))},I=Object(E.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),z=function(e){var t=e.message,n=I(),s=c.a.useState(!1),o=Object(r.a)(s,2),d=o[0],u=o[1];Object(i.useEffect)((function(){u(!0)}),[t]);var l=function(e,t){"clickaway"!==t&&u(!1)};return Object(a.jsx)("div",{className:n.root,children:t?Object(a.jsx)(F.a,{open:d,autoHideDuration:6e3,onClose:l,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object(a.jsx)(R,{onClose:l,severity:"success",children:t})}):Object(a.jsx)(a.Fragment,{})})},A=c.a.memo((function(e){var t=e.currentPoint,n=e.setIsLoadingProcess,c=e.previousCoordinates,s=e.setPreviousCoordinates,o=Object(m.b)();Object(i.useEffect)((function(){n(!1)}),[t]);var r=Object(f.a)({initialValues:{latitude:t.latitude,longitude:t.longitude,address:t.address},onSubmit:function(){o(function(e,t){return function(){var n=Object(P.a)(v.a.mark((function n(a){var i,c,s,o,r,d,u,l;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Object(D.a)({},e),n.prev=1,n.next=4,_(e.latitude,e.longitude);case 4:return d=n.sent,i.address=d.data.response.GeoObjectCollection.featureMember[0].GeoObject.metaDataProperty.GeocoderMetaData.Address.formatted,n.next=8,N(e.latitude,e.longitude,t);case 8:u=n.sent,(l=null===u||void 0===u||null===(c=u.data)||void 0===c||null===(s=c.rows[0])||void 0===s||null===(o=s.elements[0])||void 0===o||null===(r=o.distance)||void 0===r?void 0:r.text)&&(i.lastPointDistance=l),a(k(i)),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(1),console.warn("geocodeNewPoint err :",n.t0);case 17:case"end":return n.stop()}}),n,null,[[1,14]])})));return function(e){return n.apply(this,arguments)}}()}(t,c)),s([t.latitude,t.longitude]),n(!0),setTimeout((function(){n(!1)}),3e3)}}),d=function(e,t,n,i){return Object(a.jsx)(h.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:e,type:"text",name:t,label:n,onChange:r.handleChange,value:i})};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(z,{message:t.address}),Object(a.jsx)("div",{className:g.a.sendForm,children:Object(a.jsxs)("form",{onSubmit:r.handleSubmit,noValidate:!0,children:[d("latitude","latitude","Latitude",t.latitude),d("longitude","longitude","Latitude",t.longitude),d("address","address","",t.address),Object(a.jsx)(O.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Geocode"})]})})]})})),U=n(84),B=n.n(U),J=n(113),G=function(){var e=Object(m.c)((function(e){return e.mapPage.pointList}));return Object(a.jsx)("div",{className:B.a.historyTable,children:Object(a.jsx)("div",{style:{height:400,width:"100%"},children:Object(a.jsx)(J.a,{rows:e,columns:V,className:B.a.TEST,pageSize:5})})})},V=[{field:"latitude",align:"center",headerName:"Latitude",type:"number",width:180},{field:"longitude",align:"center",headerName:"Longitude",type:"number",width:180},{field:"address",align:"center",headerName:"Address",type:"string",width:450},{field:"lastPointDistance",align:"center",headerName:"Distance",type:"string",width:110}],Y=n(226),W=n(115),H=n.n(W),Q=function(){var e=Object(m.c)((function(e){return e.mapPage.pointList})).reduce((function(e,t){var n=0;if(t.lastPointDistance){if(n=Number(t.lastPointDistance.replace(/,/,".").replace(/[^0-9\.-]+/g,"")),t.lastPointDistance.includes("\u043a\u043c")||t.lastPointDistance.includes("km"))return e+n;if(t.lastPointDistance.includes("\u043c")||t.lastPointDistance.includes("m"))return e+n/1e3}return e+n}),0);return Object(a.jsxs)("div",{className:H.a.resultingDistance,children:["Resulting distance ",e.toFixed(3)," \u043a\u043c"]})},Z=function(e){return e.mapPage.pointList},q=n(116),X=n.n(q),K=n(181),$=function(){return Object(a.jsx)(K.a,{className:X.a.loadingProcess})},ee=function(){var e=Object(i.useState)({id:"",latitude:"",longitude:"",address:""}),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(i.useState)([53.91046755609704,27.5616049442719]),o=Object(r.a)(s,2),d=o[0],u=o[1],l=Object(i.useState)(18),j=Object(r.a)(l,2),p=j[0],g=j[1],f=Object(i.useState)(!1),O=Object(r.a)(f,2),h=O[0],x=O[1],v=Object(m.c)(Z),P=Object(i.useState)(["",""]),y=Object(r.a)(P,2),D=y[0],w=y[1];Object(i.useEffect)((function(){var e=v.find((function(e){return e.id===n.id}));e&&c(e),x(!1)}),[v]);var C=Object(i.useCallback)((function(e){e.preventDefault(),c({id:"",latitude:"",longitude:"",address:""}),u(e.get("target").getCenter()),g(e.get("target").getZoom());var t=e.get("coords"),n={id:Object(Y.a)(),latitude:t[0].toString(),longitude:t[1].toString()};c(n)}),[]);return Object(a.jsx)("div",{className:"app",children:h?Object(a.jsx)($,{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(b,{getMapCoordinates:C,pointList:v,center:d,zoom:p,setIsLoadingProcess:x})}),Object(a.jsxs)("div",{className:"infoBar",children:[Object(a.jsx)(A,{previousCoordinates:D,setPreviousCoordinates:w,currentPoint:n,setIsLoadingProcess:x}),Object(a.jsx)(G,{}),Object(a.jsx)(Q,{})]})]})})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,229)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),c(e),s(e)}))},ne=n(38),ae=n(117),ie=Object(ne.c)({mapPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MAP-REDUCER/ADD_OBJECT":return Object(D.a)(Object(D.a)({},e),{},{pointList:[].concat(Object(y.a)(e.pointList),[t.newObject])});default:return e}}}),ce=Object(ne.d)(ie,Object(ne.a)(ae.a));o.a.render(Object(a.jsx)(m.a,{store:ce,children:Object(a.jsx)(ee,{})}),document.getElementById("root")),te()},81:function(e,t,n){e.exports={yandexMap:"YandexMap_yandexMap__Q1MUo",Map:"YandexMap_Map__1wL9U"}},84:function(e,t,n){e.exports={historyTable:"SearchTable_historyTable__O3zNU"}}},[[175,1,2]]]);
//# sourceMappingURL=main.7ecb4d5e.chunk.js.map